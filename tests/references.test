# -*- tcl -*- tcl.tk//DSL tcltest//EN//2.0
## (c) 2021 Andreas Kupries
# # ## ### ##### ######## ############# #####################
## Ankh testsuite
## - API testing
#
## ak hash HASH references

kt check Tcl     8.5
kt check tcltest 2

kt local testing ankh

kt source support/util.tcl

# # ## ### ##### ######## ############# #####################

foreach hash {
    md4
    md5
    sha1
    sha2
    sha3
} {
    # - -- --- ----- -------- ------------- ---------------------

    tcltest::test ankh-${hash}-references-1.0 "ak hash $hash references, wrong#args" -body {
	ak hash $hash references X
    } -returnCodes error -result "wrong # args: should be \"ak hash $hash references\""

    # - -- --- ----- -------- ------------- ---------------------

    tcltest::test ankh-${hash}-references-2.0 "ak hash $hash references" -body {
	join [ak hash $hash references] \n
    } -result [v $hash/references]

    # - -- --- ----- -------- ------------- ---------------------
}

# # ## ### ##### ######## ############# #####################
cleanupTests
return
